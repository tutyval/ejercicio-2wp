wp.customize.controlConstructor["kirki-checkbox"]=wp.customize.Control.extend({ready:function(){"use strict";var e=this,t=e.setting._value;this.container.on("change","input",function(){t=!!jQuery(this).is(":checked"),e.setting.set(t)})}}),wp.customize.controlConstructor["kirki-color-palette"]=wp.customize.Control.extend({ready:function(){"use strict";var e=this;this.container.on("click","input",function(){e.setting.set(jQuery(this).val())})}}),kirki.kirkiGetColorPalette=function(){return[]},kirki.kirkiGetColorPicker=function(e,t,i){if(jQuery.fn.spectrum){var n=e.data("alpha"),r="postMessage"===e.data("transport");function s(e){jQuery(this).data("alpha")?t(e.toRgbString()):t(e.toHexString())}e.off("change").on("change",function(e){e.preventDefault(),e.stopPropagation(),s.call(this,jQuery(this).spectrum("get"))}),e.spectrum({instant:!!i&&i.instant,preferredFormat:n?"rgb":"hex",showInput:!0,showPalette:!0,color:e[0].getAttribute("value"),hideAfterPaletteSelect:!1,showSelectionPalette:!1,showAlpha:n,change:s,hide:s,move:r?s:function(){},beforeShow:function(){e.spectrum("option","palette",kirki.kirkiGetColorPalette())}})}else e.wpColorPicker(i),e.wpColorPicker({change:function(e,i){t(i.color.toCSS())}})},wp.customize.controlConstructor["kirki-color"]=wp.customize.Control.extend({ready:function(){"use strict";var e=this,t=this.container.find(".kirki-color-control");t.data("transport",e.setting.transport),void 0!==e.params.choices&&kirki.kirkiGetColorPicker(t,function(t){setTimeout(function(){e.setting.set(t)},100)},e.params.choices)}}),wp.customize.controlConstructor["kirki-dashicons"]=wp.customize.Control.extend({ready:function(){"use strict";var e=this;this.container.on("click","input",function(){e.setting.set(jQuery(this).val())})}}),wp.customize.controlConstructor["kirki-date"]=wp.customize.Control.extend({ready:function(){"use strict";var e=this,t=e.selector+" input.datepicker";jQuery(t).datepicker(),this.container.on("change keyup paste","input.datepicker",function(){e.setting.set(jQuery(this).val())})}}),wp.customize.controlConstructor["kirki-dimension"]=wp.customize.Control.extend({ready:function(){"use strict";var e,t=this;kirkiNotifications(t.id,"kirki-dimension",t.params.kirkiConfig);var i=_.debounce(function(i){e=jQuery(i.target).val(),t.setting.set(e)},600);this.container.on("change keyup paste","input",i)}}),wp.customize.controlConstructor["kirki-dropdown-pages"]=wp.customize.Control.extend({ready:function(){"use strict";var e=this,t=this.container.find("select");jQuery(t).selectize(),this.container.on("change","select",function(){e.setting.set(jQuery(this).val())})}}),wp.customize.controlConstructor["kirki-editor"]=wp.customize.Control.extend({ready:function(){"use strict";var e,t,i=this,n=i.container.find("textarea"),r=i.container.find(".toggle-editor"),s=(jQuery("#kirki_editor_pane"),jQuery("#kirki_editor_pane textarea.wp-editor-area"));jQuery(window).load(function(){var o=tinyMCE.get("kirki-editor");r.html(window.kirki.l10n[i.params.kirkiConfig]["open-editor"]),r.on("click",function(){i.toggleEditor(),i.changeButton(),i.setEditorContent(o),i.previewHeight()}),o&&o.onChange.add(function(r,s){r.save(),t=o.getContent(),clearTimeout(e),e=setTimeout(function(){n.val(t).trigger("change"),wp.customize.instance(i.getEditorWrapperSetting()).set(t)},500)}),s.on("change keyup paste",function(){wp.customize.instance(i.getEditorWrapperSetting()).set(jQuery(this).val())})})},changeButton:function(){"use strict";var e=this;jQuery("#kirki_editor_pane");jQuery(".customize-control-kirki-editor .toggle-editor").html(window.kirki.l10n[e.params.kirkiConfig]["switch-editor"]),!1!==e.getEditorWrapperSetting()?(jQuery(".customize-control-kirki-editor .toggle-editor").html(window.kirki.l10n[e.params.kirkiConfig]["switch-editor"]),jQuery("#customize-control-"+e.getEditorWrapperSetting()+" .toggle-editor").html(window.kirki.l10n[e.params.kirkiConfig]["close-editor"])):jQuery(".customize-control-kirki-editor .toggle-editor").html(window.kirki.l10n[e.params.kirkiConfig]["open-editor"])},toggleEditor:function(){"use strict";var e=this,t=jQuery("#kirki_editor_pane");e.getEditorWrapperSetting()&&e.id===e.getEditorWrapperSetting()?(t.removeClass(),t.addClass("hide")):(t.removeClass(),t.addClass(e.id))},setEditorContent:function(e){"use strict";jQuery("#kirki_editor_pane");e.setContent(this.setting._value)},getEditorWrapperSetting:function(){"use strict";return!jQuery("#kirki_editor_pane").hasClass("hide")&&(!!jQuery("#kirki_editor_pane").attr("class")&&jQuery("#kirki_editor_pane").attr("class"))},previewHeight:function(){jQuery("#kirki_editor_pane").hasClass("hide")?jQuery("#customize-preview").hasClass("is-kirki-editor-open")&&jQuery("#customize-preview").removeClass("is-kirki-editor-open"):jQuery("#customize-preview").hasClass("is-kirki-editor-open")||jQuery("#customize-preview").addClass("is-kirki-editor-open")}}),wp.customize.controlConstructor["kirki-generic"]=wp.customize.Control.extend({ready:function(){"use strict";var e=this;this.container.on("change keyup paste",e.params.choices.element,_.debounce(function(){e.setting.set(jQuery(this).val())},600))}}),wp.customize.controlConstructor["kirki-multicheck"]=wp.customize.Control.extend({ready:function(){"use strict";var e=this;e.container.on("change","input",function(){var t=[],i=0;jQuery.each(e.params.choices,function(n,r){e.container.find('input[value="'+n+'"]').is(":checked")&&(t[i]=n,i++)}),e.setting.set(t)})}}),wp.customize.controlConstructor["kirki-multicolor"]=wp.customize.Control.extend({ready:function(){"use strict";var e,t,i=this,n=i.params.choices,r=Object.keys(n),s=this.params.value,o=i.container.find(".iris-target"),a=0;function c(e,t,i){var n=e.container.find(".multicolor-index-"+i);n.wpColorPicker({target:o[0],change:function(r,s){setTimeout(function(){t[i]=n.val(),e.setValue(t,!1),e.container.find(".multicolor-index-"+i).trigger("change")},100)}})}for(this.settingField=this.container.find("[data-customize-setting-link]").first();a<Object.keys(n).length;)c(this,s,r[a]),e=i.container.find(".wp-picker-container .wp-picker-input-wrap"),t=i.container.find(".wp-picker-container .wp-picker-holder"),jQuery(e[0]).detach().appendTo(o[0]),jQuery(t[0]).detach().appendTo(o[0]),a++},setValue:function(e,t){"use strict";var i={};_.each(e,function(e,t){i[t]=e}),this.setting.set(i),t&&this.settingField.trigger("change")}}),wp.customize.controlConstructor["kirki-number"]=wp.customize.Control.extend({ready:function(){"use strict";var e=this,t=this.container.find("input"),i=-99999,n=99999,r=1;void 0!==e.params.choices&&void 0!==e.params.choices.min&&(i=e.params.choices.min),void 0!==e.params.choices&&void 0!==e.params.choices.max&&(n=e.params.choices.max),void 0!==e.params.choices&&void 0!==e.params.choices.step&&(r=e.params.choices.step,"any"===e.params.choices.step&&(r="0.001")),jQuery(t).spinner({min:i,max:n,step:r});var s=void 0,o=_.debounce(function(){var i=jQuery(t).val();s!==i&&(s=i,e.setting.set(i))},600);this.container.on("mousedown keydown","input",function(){s=this.value}),this.container.on("change click keyup paste","input",o)}}),wp.customize.controlConstructor["kirki-palette"]=wp.customize.Control.extend({ready:function(){"use strict";var e=this;this.container.on("click","input",function(){e.setting.set(jQuery(this).val())})}}),wp.customize.controlConstructor["kirki-preset"]=wp.customize.Control.extend({ready:function(){"use strict";var e,t=this,i=this.container.find("select");jQuery(i).selectize(),this.container.on("change","select",function(){e=jQuery(this).val(),t.setting.set(e),jQuery.each(t.params.choices,function(t,i){e===t&&jQuery.each(i.settings,function(e,t){kirkiSetSettingValue(e,t)})}),wp.customize.previewer.refresh()})}}),wp.customize.controlConstructor["kirki-radio-buttonset"]=wp.customize.Control.extend({ready:function(){"use strict";var e=this;this.container.on("click","input",function(){e.setting.set(jQuery(this).val())})}}),wp.customize.controlConstructor["kirki-radio-image"]=wp.customize.Control.extend({ready:function(){"use strict";var e=this;this.container.on("click","input",function(){e.setting.set(jQuery(this).val())})}}),wp.customize.controlConstructor["kirki-radio"]=wp.customize.Control.extend({ready:function(){"use strict";var e=this;this.container.on("change","input",function(){e.setting.set(jQuery(this).val())})}});var RepeaterRow=function(e,t,i){"use strict";var n=this;this.rowIndex=e,this.container=t,this.label=i,this.header=this.container.find(".repeater-row-header"),this.header.on("click",function(){n.toggleMinimize()}),this.container.on("click",".repeater-row-remove",function(){n.remove()}),this.header.on("mousedown",function(){n.container.trigger("row:start-dragging")}),this.container.on("keyup change","input, select, textarea",_.debounce(function(e){n.container.trigger("row:update",[n.rowIndex,jQuery(e.target).data("field"),e.target])},800)),this.setRowIndex=function(e){this.rowIndex=e,this.container.attr("data-row",e),this.container.data("row",e),this.updateLabel()},this.toggleMinimize=function(){this.container.toggleClass("minimized"),this.header.find(".dashicons").toggleClass("dashicons-arrow-up").toggleClass("dashicons-arrow-down")},this.remove=function(){this.container.slideUp(300,function(){jQuery(this).detach()}),this.container.trigger("row:remove",[this.rowIndex])},this.updateLabel=function(){var e,t;"field"!==this.label.type||"function"!=typeof(e=this.container.find('.repeater-field [data-field="'+this.label.field+'"]')).val||""===(t=e.val())?this.header.find(".repeater-row-label").text(this.label.value+" "+(this.rowIndex+1)):this.header.find(".repeater-row-label").text(t)},this.updateLabel()};wp.customize.controlConstructor.repeater=wp.customize.Control.extend({ready:function(){"use strict";var e,t,i=this,n=this.params.value;this.settingField=this.container.find("[data-customize-setting-link]").first(),this.setValue([],!1),this.repeaterFieldsContainer=this.container.find(".repeater-fields").first(),this.currentIndex=0,this.rows=[],e=!1,void 0!==this.params.choices.limit&&(e=!(0>=this.params.choices.limit)&&parseInt(this.params.choices.limit)),this.container.on("click","button.repeater-add",function(n){n.preventDefault(),(!e||i.currentIndex<e)&&((t=i.addRow()).toggleMinimize(),i.initColorPicker(),i.initDropdownPages(t)),e&&i.currentIndex>=e&&(jQuery(i.selector+" .limit").addClass("highlight"),jQuery(i.selector+" .repeater-add").hide())}),e&&e==n.length&&jQuery(i.selector+" .repeater-add").hide(),this.container.on("click",".repeater-row-remove",function(t){i.currentIndex--,(!e||i.currentIndex<e)&&(jQuery(i.selector+" .limit").removeClass("highlight"),jQuery(i.selector+" .repeater-add").show())}),this.container.on("click keypress",".repeater-field-image .upload-button,.repeater-field-cropped_image .upload-button,.repeater-field-upload .upload-button",function(e){e.preventDefault(),i.$thisButton=jQuery(this),i.openFrame(e)}),this.container.on("click keypress",".repeater-field-image .remove-button,.repeater-field-cropped_image .remove-button",function(e){e.preventDefault(),i.$thisButton=jQuery(this),i.removeImage(e)}),this.container.on("click keypress",".repeater-field-upload .remove-button",function(e){e.preventDefault(),i.$thisButton=jQuery(this),i.removeFile(e)}),this.repeaterTemplate=_.memoize(function(){var e={evaluate:/<#([\s\S]+?)#>/g,interpolate:/\{\{\{([\s\S]+?)\}\}\}/g,escape:/\{\{([^\}]+?)\}\}(?!\})/g,variable:"data"};return function(t){return _.template(i.container.find(".customize-control-repeater-content").first().html(),null,e)(t)}}),n.length&&_.each(n,function(e){t=i.addRow(e),i.initColorPicker(),i.initDropdownPages(t,e)}),this.setValue(n,!0,!0),this.repeaterFieldsContainer.sortable({handle:".repeater-row-header",update:function(e,t){i.sort()}})},openFrame:function(e){"use strict";wp.customize.utils.isKeydownButNotEnterEvent(e)||(this.$thisButton.closest(".repeater-field").hasClass("repeater-field-cropped_image")?this.initCropperFrame():this.initFrame(),this.frame.open())},initFrame:function(){"use strict";var e=this.getMimeType();this.frame=wp.media({states:[new wp.media.controller.Library({library:wp.media.query({type:e}),multiple:!1,date:!1})]}),this.frame.on("select",this.onSelect,this)},initCropperFrame:function(){"use strict";var e=this.$thisButton.siblings("input.hidden-field").attr("data-field"),t=this.getMimeType();"string"==typeof e&&""!==e&&"object"==typeof this.params.fields[e]&&"cropped_image"===this.params.fields[e].type&&["width","height","flex_width","flex_height"].forEach(function(t,i){void 0!==this.params.fields[e][t]&&(this.params[t]=this.params.fields[e][t])}.bind(this)),this.frame=wp.media({button:{text:"Select and Crop",close:!1},states:[new wp.media.controller.Library({library:wp.media.query({type:t}),multiple:!1,date:!1,suggestedWidth:this.params.width,suggestedHeight:this.params.height}),new wp.media.controller.CustomizeImageCropper({imgSelectOptions:this.calculateImageSelectOptions,control:this})]}),this.frame.on("select",this.onSelectForCrop,this),this.frame.on("cropped",this.onCropped,this),this.frame.on("skippedcrop",this.onSkippedCrop,this)},onSelect:function(){"use strict";var e=this.frame.state().get("selection").first().toJSON();this.$thisButton.closest(".repeater-field").hasClass("repeater-field-upload")?this.setFileInRepeaterField(e):this.setImageInRepeaterField(e)},onSelectForCrop:function(){"use strict";var e=this.frame.state().get("selection").first().toJSON();this.params.width!==e.width||this.params.height!==e.height||this.params.flex_width||this.params.flex_height?this.frame.setState("cropper"):this.setImageInRepeaterField(e)},onCropped:function(e){"use strict";this.setImageInRepeaterField(e)},calculateImageSelectOptions:function(e,t){"use strict";var i,n,r,s=t.get("control"),o=!!parseInt(s.params.flex_width,10),a=!!parseInt(s.params.flex_height,10),c=e.get("width"),u=e.get("height"),l=parseInt(s.params.width,10),d=parseInt(s.params.height,10),h=l/d,p=c,f=u;return t.set("canSkipCrop",!s.mustBeCropped(o,a,l,d,c,u)),p/f>h?l=(d=f)*h:d=(l=p)/h,r={handles:!0,keys:!0,instance:!0,persistent:!0,imageWidth:c,imageHeight:u,x1:i=(p-l)/2,y1:n=(f-d)/2,x2:l+i,y2:d+n},!1===a&&!1===o&&(r.aspectRatio=l+":"+d),!1===a&&(r.maxHeight=d),!1===o&&(r.maxWidth=l),r},mustBeCropped:function(e,t,i,n,r,s){"use strict";return(!0!==e||!0!==t)&&((!0!==e||n!==s)&&((!0!==t||i!==r)&&((i!==r||n!==s)&&!(r<=i))))},onSkippedCrop:function(){"use strict";var e=this.frame.state().get("selection").first().toJSON();this.setImageInRepeaterField(e)},setImageInRepeaterField:function(e){"use strict";var t=this.$thisButton.closest(".repeater-field-image,.repeater-field-cropped_image");t.find(".kirki-image-attachment").html('<img src="'+e.url+'">').hide().slideDown("slow"),t.find(".hidden-field").val(e.id),this.$thisButton.text(this.$thisButton.data("alt-label")),t.find(".remove-button").show(),t.find("input, textarea, select").trigger("change"),this.frame.close()},setFileInRepeaterField:function(e){"use strict";var t=this.$thisButton.closest(".repeater-field-upload");t.find(".kirki-file-attachment").html('<span class="file"><span class="dashicons dashicons-media-default"></span> '+e.filename+"</span>").hide().slideDown("slow"),t.find(".hidden-field").val(e.id),this.$thisButton.text(this.$thisButton.data("alt-label")),t.find(".upload-button").show(),t.find(".remove-button").show(),t.find("input, textarea, select").trigger("change"),this.frame.close()},getMimeType:function(){"use strict";var e=this.$thisButton.siblings("input.hidden-field").attr("data-field");return"string"==typeof e&&""!==e&&"object"==typeof this.params.fields[e]&&"upload"===this.params.fields[e].type&&void 0!==this.params.fields[e].mime_type?this.params.fields[e].mime_type:"image"},removeImage:function(e){"use strict";var t,i;wp.customize.utils.isKeydownButNotEnterEvent(e)||(i=(t=this.$thisButton.closest(".repeater-field-image,.repeater-field-cropped_image,.repeater-field-upload")).find(".upload-button"),t.find(".kirki-image-attachment").slideUp("fast",function(){jQuery(this).show().html(jQuery(this).data("placeholder"))}),t.find(".hidden-field").val(""),i.text(i.data("label")),this.$thisButton.hide(),t.find("input, textarea, select").trigger("change"))},removeFile:function(e){"use strict";var t,i;wp.customize.utils.isKeydownButNotEnterEvent(e)||(i=(t=this.$thisButton.closest(".repeater-field-upload")).find(".upload-button"),t.find(".kirki-file-attachment").slideUp("fast",function(){jQuery(this).show().html(jQuery(this).data("placeholder"))}),t.find(".hidden-field").val(""),i.text(i.data("label")),this.$thisButton.hide(),t.find("input, textarea, select").trigger("change"))},getValue:function(){"use strict";var e=[];return e=_.isString(this.setting.get())?JSON.parse(decodeURI(this.setting.get())):this.setting.get(),_.toArray(e)},setValue:_.debounce(function(e,t,i){"use strict";var n=e,r=[];i&&(jQuery.each(this.params.fields,function(e,t){"image"!==t.type&&"cropped_image"!==t.type&&"upload"!==t.type||r.push(e)}),jQuery.each(e,function(e,t){jQuery.each(r,function(i,r){void 0!==t[r]&&void 0!==t[r].id&&(n[e][r]=t[r].id)})}));if(this.params.choices.beforeValueSet&&window[this.params.choices.beforeValueSet]&&(n=window[this.params.choices.beforeValueSet].call(this,n)),window.CP_Customizer)if(window.CP_Customizer.preview.frame()){n=CP_Customizer.utils.normalizeValue(n),this.setting.set(encodeURI(JSON.stringify(n))),t&&this.settingField.trigger("change");var s=this;n.forEach(function(e,t){if(s.rows[t]){var i=s.rows[t].container;for(var n in e){i.find('[data-field="'+n+'"]').val()!==e[n]&&i.find('[data-field="'+n+'"]').val(e[n]).trigger("change")}}})}else this.setting._value=encodeURI(JSON.stringify(n));else wp.customize.previewer.targetWindow.get()?(this.setting.set(encodeURI(JSON.stringify(n))),t&&this.settingField.trigger("change")):this.setting._value=encodeURI(JSON.stringify(n))},500),addRow:function(e){"use strict";var t,i,n,r=this,s=r.repeaterTemplate(),o=this.getValue(),a={};if(s){if(t=jQuery.extend(!0,{},r.params.fields),e)for(n in e)e.hasOwnProperty(n)&&t.hasOwnProperty(n)&&(t[n].default=e[n]);t.index=this.currentIndex,s=s(t),(i=new RepeaterRow(r.currentIndex,jQuery(s).appendTo(r.repeaterFieldsContainer),r.params.row_label)).container.on("row:remove",function(e,t){r.deleteRow(t)}),i.container.on("row:update",function(e,t,n,s){r.updateField.call(r,e,t,n,s),i.updateLabel()}),this.rows[this.currentIndex]=i;for(n in t)t.hasOwnProperty(n)&&(a[n]=t[n].default);return o[this.currentIndex]=a,this.setValue(o,!0),this.currentIndex++,i}},sort:function(){"use strict";var e=this,t=this.repeaterFieldsContainer.find(".repeater-row"),i=[],n=e.getValue(),r=[],s=[];t.each(function(e,t){i.push(jQuery(t).data("row"))}),jQuery.each(i,function(t,i){r[t]=e.rows[i],r[t].setRowIndex(t),s[t]=n[i]}),e.rows=r,e.setValue(s)},deleteRow:function(e){"use strict";var t,i=this.getValue();if(i[e]&&this.rows[e]&&(_.isArray(i)?i.splice(e,1):delete i[e],_.isArray(this.rows)?this.rows.splice(e,1):delete this.rows[e],i=_.omit(i,_.isNull),i=_.omit(i,_.isUndefined),this.setValue(i,!0)),_.isArray(this.rows))this.rows.forEach(function(e,t){e.setRowIndex(t),e.updateLabel()});else{for(t in this.rows)this.rows.hasOwnProperty(t)&&this.rows[t]&&(this.rows[t].updateLabel(),0)}},updateField:function(e,t,i,n){"use strict";var r,s,o;this.rows[t]&&this.params.fields[i]&&(r=this.params.fields[i].type,s=this.rows[t],o=this.getValue(),n=jQuery(n),void 0!==typeof o[s.rowIndex][i]&&(o[s.rowIndex][i]="checkbox"===r?n.is(":checked"):n.val(),this.setValue(o,!0)))},initColorPicker:function(){"use strict";var e=this,t=e.container.find(".color-picker-hex"),i={},n=t.data("field");void 0!==n&&void 0!==e.params.fields[n]&&void 0!==e.params.fields[n].palettes&&"object"==typeof e.params.fields[n].palettes&&(i.palettes=e.params.fields[n].palettes),i.change=function(t,i){var n=jQuery(t.target),r=n.closest(".repeater-row").data("row"),s=e.getValue();s[r][n.data("field")]=i.color.toString(),e.setValue(s,!0)},0!==t.length&&t.wpColorPicker(i)},initDropdownPages:function(e,t){"use strict";var i,n,r=this,s=e.container.find(".repeater-dropdown-pages select");0!==s.length&&(i=jQuery(s).selectize()[0].selectize,n=s.data("field"),t&&i.setValue(t[n]),this.container.on("change",".repeater-dropdown-pages select",function(e){var t=jQuery(e.target),i=t.closest(".repeater-row").data("row"),n=r.getValue();n[i][t.data("field")]=jQuery(this).val(),r.setValue(n)}))}}),wp.customize.controlConstructor["kirki-select"]=wp.customize.Control.extend({ready:function(){"use strict";var e,t=this,i=this.container.find("select"),n=parseInt(i.data("multiple"));_.delay(function(){n>1?jQuery(i).selectize({maxItems:n,plugins:["remove_button","drag_drop"]}):jQuery(i).selectize()},50),this.container.on("change","select",function(){e=jQuery(this).val(),n>1?e=_.extend({},jQuery(this).val()):t.container.find("select").data().selectize.blur(),t.setting.set(e)})}}),wp.customize.controlConstructor["kirki-slider"]=wp.customize.Control.extend({ready:function(){"use strict";var e,t,i,n,r=this;jQuery("input[type=range]").on("mousedown",function(){e=jQuery(this).attr("value"),jQuery(this).mousemove(function(){e=jQuery(this).attr("value"),jQuery(this).closest("label").find(".kirki_range_value .value").text(e)})}),jQuery(".kirki-slider-reset").click(function(){t=jQuery(this).closest("label").find("input"),i=t.data("reset_value"),t.val(i),t.change(),jQuery(this).closest("label").find(".kirki_range_value .value").text(i)}),n="postMessage"===r.setting.transport?"mousemove change":"change",this.container.on(n,"input",function(){r.setting.set(jQuery(this).val())})}}),wp.customize.controlConstructor["kirki-sortable"]=wp.customize.Control.extend({ready:function(){"use strict";var e=this;this.settingField=this.container.find("[data-customize-setting-link]").first(),this.sortableContainer=this.container.find("ul.sortable").first(),this.setValue(this.setting.get(),!1),this.sortableContainer.sortable().disableSelection().on("sortstop",function(t,i){e.sort()}).find("li").each(function(){jQuery(this).find("i.visibility").click(function(){jQuery(this).toggleClass("dashicons-visibility-faint").parents("li:eq(0)").toggleClass("invisible")})}).click(function(){e.sort()})},sort:function(){"use strict";var e=[];this.sortableContainer.find("li").each(function(){var t=jQuery(this);t.is(".invisible")||e.push(t.data("value"))}),this.setValue(e,!0)},getValue:function(){"use strict";return unserialize(this.setting.get())},setValue:function(e,t){"use strict";var i=e;this.setting.set(i),this.settingField.val(i),t&&this.settingField.trigger("change")}}),wp.customize.controlConstructor["kirki-spacing"]=wp.customize.Control.extend({ready:function(){"use strict";var e,t=this.params.choices.controls,i={},n=[];for(_.each(t,function(e,t){!0===e&&n.push(t)}),e=0;e<n.length;e++)i[n[e]]=this.setting._value[n[e]],this.updateSpacingValue(n[e],i)},updateSpacingValue:function(e,t){var i=this,n=_.debounce(function(n){i.setting&&i.setting.get()&&(t=_.clone(i.setting.get())),t[e]=n.val(),kirkiNotifications(i.id,"kirki-spacing",i.params.kirkiConfig),i.saveValue(t)},500);i.container.on("change keyup paste","."+e+" input",function(){n(jQuery(this))})},saveValue:function(e){"use strict";var t={};_.each(e,function(e,i){t[i]=e}),this.setting.set(t)}}),wp.customize.controlConstructor["kirki-switch"]=wp.customize.Control.extend({ready:function(){"use strict";var e=this,t=e.setting._value;this.container.on("change","input",function(){t=!!jQuery(this).is(":checked"),e.setting.set(t)})}}),wp.customize.controlConstructor["kirki-toggle"]=wp.customize.Control.extend({ready:function(){"use strict";var e=this,t=e.setting._value;this.container.on("change","input",function(){t=!!jQuery(this).is(":checked"),e.setting.set(t)})}}),function(e){wp.customize.controlConstructor["kirki-typography"]=wp.customize.Control.extend({ready:function(){"use strict";var t,i,n,r=this,s=r.selector+" .font-family select",o=r.selector+" .variant select",a=r.selector+" .subsets select",c=r.selector+" .text-transform select",u=!1,l=!1,d={};function h(){return d=_.clone(r.setting._value)}e(r.selector+" .addwebfont").on("click",function(){top.wp.customize.control("web_fonts").focus()}),_.each(r.params.default,function(e,t){!1!==e&&(d[t]=e,void 0!==r.setting._value[t]&&(d[t]=r.setting._value[t]))}),_.each(r.setting._value,function(e,t){void 0!==d[t]&&void 0!==d[t]||(d[t]=e)}),i=function(e,i,n){var s,c,h,p="variant"===i?o:a,f=!1,g={};void 0!==jQuery(p).selectize()[0]&&jQuery(p).selectize()[0].selectize.destroy(),_.each(kirkiAllFonts,function(t,n){e===t.family&&(void 0!==t.isStandard&&!0===t.isStandard&&(f=!0),"variant"===i?g=t.variants:"subsets"===i&&(g=t.subsets))}),!1!==f&&"subsets"===i||(null===n?("variant"===i?_.each(g,function(e){void 0!==e.id?t=d.variant:"regular"===e.id?u=!0:!1===l&&(l=e.id)}):"subsets"===i&&(c={},_.each(g,function(e){null!==d.subsets&&_.each(d.subsets,function(t){void 0!==e&&t===e.id&&(c[t]=t)})}),0!==c.length&&(h=jQuery.map(c,function(e,t){return[e]}),t=h)),s=void 0!==t?t:!1!==u?"regular":l):s=n,jQuery(p).selectize({maxItems:"variant"===i?1:null,valueField:"id",labelField:"label",searchField:["label"],options:g,items:"variant"===i?[s]:s,create:!1,plugins:"variant"===i?"":["remove_button"],render:{item:function(e,t){return"<div>"+t(e.label)+"</div>"},option:function(e,t){return"<div>"+t(e.label)+"</div>"}}}).data("selectize")),!0===f?r.container.find(".hide-on-standard-fonts").css("display","none"):2>g.length?r.container.find(".kirki-"+i+"-wrapper").css("display","none"):r.container.find(".kirki-"+i+"-wrapper").css("display","block")},jQuery(s).selectize({options:kirkiAllFonts,items:[r.setting._value["font-family"]],persist:!1,maxItems:1,valueField:"family",labelField:"label",searchField:["family","label","subsets"],create:!1,render:{item:function(e,t){return"<div>"+t(e.label)+"</div>"},option:function(e,t){return"<div>"+t(e.label)+"</div>"}}}),i(d["font-family"],"variant",d.variant),i(d["font-family"],"subsets",d.subsets),this.container.on("change",".font-family select",function(){h(),d["font-family"]=jQuery(this).val(),r.saveValue(d),i(jQuery(this).val(),"variant",null),i(jQuery(this).val(),"subsets",null)}),this.container.on("change",".variant select",function(){h(),d.variant=jQuery(this).val(),r.saveValue(d)}),this.container.on("change",".subsets select",function(){h(),d.subsets=jQuery(this).val(),r.saveValue(d),wp.customize.previewer.refresh()}),this.container.on("change keyup paste",".font-size input",function(){h(),d["font-size"]=jQuery(this).val(),r.saveValue(d)}),this.container.on("change keyup paste",".mobile-font-size input",function(){h(),d["mobile-font-size"]=jQuery(this).val(),r.saveValue(d)}),this.container.on("change keyup paste",".line-height input",function(){h(),d["line-height"]=jQuery(this).val(),r.saveValue(d)}),this.container.on("change keyup paste",".letter-spacing input",function(){h(),d["letter-spacing"]=jQuery(this).val(),r.saveValue(d)}),this.container.on("change",".text-align input",function(){h(),d["text-align"]=jQuery(this).val(),r.saveValue(d)}),jQuery(c).selectize(),this.container.on("change",".text-transform select",function(){h(),d["text-transform"]=jQuery(this).val(),r.saveValue(d)}),(n=this.container.find(".kirki-color-control")).length&&kirki.kirkiGetColorPicker(n,function(e){(d=h()).color=e,r.saveValue(d)})},saveValue:function(e){"use strict";var t={};_.each(e,function(e,i){t[i]=e}),this.setting.set(t)}})}(jQuery);
//# sourceMappingURL=controls.min.js.map
